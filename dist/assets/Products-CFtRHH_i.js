import{j as e}from"./vendor-query-Bcn4Fvtg.js";import{r as m}from"./vendor-react-DbHp_wuh.js";import{U as ve,x as S,z as je,e as Ne,W as we,n as Ae,X as v,w as B,Y as Ie,B as Se,Z as Fe,y as Ce}from"./index-CDJVr2wI.js";import{T as Re,B as Pe}from"./Badge-BGqaB6wT.js";import{B as F}from"./Button-CC2RlQoZ.js";import{M as De}from"./Modal-Cghr_C7K.js";import{p as g,e as G,c as ke}from"./api--gIgMF1d.js";import"./vendor-icons-BV48wJe3.js";const Be=()=>{const[K,h]=m.useState(!1),[p,Q]=m.useState(!1),[C,_]=m.useState(null),[b,ee]=m.useState([]),[T,te]=m.useState([]),[E,W]=m.useState(!0),[R,Y]=m.useState(""),[P,re]=m.useState(""),[j,se]=m.useState(""),[N,ae]=m.useState("all"),[i,d]=m.useState({name:"",slug:"",overview:"",categoryId:"",isActive:!0,imageUrl:"",priceINR:"",priceSAR:"",features:[""],specifications:[{param:"",value:""}],faqs:[{question:"",answer:""}]}),[D,z]=m.useState("url"),[qe,U]=m.useState(null),[u,w]=m.useState({listType:null,dragIndex:null,overIndex:null}),x=m.useRef(null);m.useEffect(()=>{A(),ie()},[]);const A=async()=>{try{W(!0);const t=await g.getAll();ee(G(t)),Y("")}catch(t){Y("Failed to load products"),console.error(t)}finally{W(!1)}},ie=async()=>{try{const t=await ke.getAll();te(G(t))}catch(t){console.error("Failed to load categories:",t)}},X=T.filter(t=>!t.parentId),H=t=>T.filter(r=>{const s=r.parentId?.id||r.parentId;return String(s)===String(t)}),k=b.filter(t=>{const r=t.name.toLowerCase().includes(P.toLowerCase())||t.slug.toLowerCase().includes(P.toLowerCase()),s=!j||(t.categoryId?.id||t.categoryId)===j||t.category?.id===j,n=N==="all"||N==="active"&&t.isActive||N==="inactive"&&!t.isActive;return r&&s&&n}),I={total:b.length,active:b.filter(t=>t.isActive).length,inactive:b.filter(t=>!t.isActive).length,filtered:k.length},ne=async t=>{if(t.preventDefault(),!i.name||!i.name.trim()){alert("Product name is required");return}if(!i.slug||!i.slug.trim()){alert("Product slug is required");return}if(!i.categoryId){alert("Please select a category");return}if(!p&&(!i.priceINR||parseFloat(i.priceINR)<=0)){alert("Please enter a valid price in INR (greater than 0)");return}try{const r={name:i.name.trim(),slug:i.slug.trim(),categoryId:i.categoryId,isActive:i.isActive};if(i.overview&&i.overview.trim()&&(r.overview=i.overview.trim()),i.imageUrl&&i.imageUrl.trim()&&(r.imageUrl=i.imageUrl.trim()),!p||i.priceINR&&parseFloat(i.priceINR)>0){const a=[{amount:parseFloat(i.priceINR),currency:"INR"}];i.priceSAR&&parseFloat(i.priceSAR)>0&&a.push({amount:parseFloat(i.priceSAR),currency:"SAR"}),r.prices=a}const s=i.features.filter(a=>a.trim()).map((a,c)=>({title:a.trim(),sortOrder:c})),n=i.specifications.filter(a=>a.param.trim()&&a.value.trim()).map((a,c)=>({parameter:a.param.trim(),value:a.value.trim(),sortOrder:c})),l=i.faqs.filter(a=>a.question.trim()&&a.answer.trim()).map((a,c)=>({question:a.question.trim(),answer:a.answer.trim(),sortOrder:c}));if(p){await g.update(C,r);const a=[];try{await g.updateFeatures(C,{features:s})}catch(c){a.push("features"),console.error("Failed to update features:",c)}try{await g.updateSpecifications(C,{specifications:n})}catch(c){a.push("specifications"),console.error("Failed to update specifications:",c)}try{await g.updateFaqs(C,{faqs:l})}catch(c){a.push("faqs"),console.error("Failed to update FAQs:",c)}a.length>0?alert(`Product updated, but failed to save: ${a.join(", ")}. You can try editing again.`):alert("Product updated successfully!")}else s.length>0&&(r.features=s),n.length>0&&(r.specifications=n),l.length>0&&(r.faqs=l),await g.create(r),alert("Product created successfully!");h(!1),q(),A()}catch(r){console.error("Failed to save product:",r);const s=r.response?.data?.errors;let n=r.response?.data?.message||`Failed to ${p?"update":"create"} product`;s&&Array.isArray(s)&&s.length>0&&(n+=`:
`+s.map(l=>typeof l=="string"?`- ${l}`:`- ${l.field||l.path||"Field"}: ${l.message||l.msg||JSON.stringify(l)}`).join(`
`)),alert(n)}},le=async t=>{const r=t._id||t.id;Q(!0),_(r);let s=t;try{const o=await g.getBySlug(t.slug);o&&typeof o=="object"&&(s=o.data||o)}catch(o){console.error("Could not fetch full product details, using list data:",o)}const n=s.prices?.find(o=>o.currency==="INR"),l=s.prices?.find(o=>o.currency==="SAR"),a=(s.features||[]).map(o=>typeof o=="string"?o:o.title||o.text||o.name||o.feature||""),c=(s.specifications||[]).map(o=>({param:o.parameter||o.param||o.key||o.name||"",value:o.value||""})),y=(s.faqs||[]).map(o=>({question:o.question||"",answer:o.answer||""}));d({name:s.name,slug:s.slug,overview:s.overview||"",categoryId:s.category?.id||s.categoryId?.id||s.categoryId||"",isActive:s.isActive!==void 0?s.isActive:!0,imageUrl:s.imageUrl||"",priceINR:n?String(n.amount):"",priceSAR:l?String(l.amount):"",features:a.length>0?a:[""],specifications:c.length>0?c:[{param:"",value:""}],faqs:y.length>0?y:[{question:"",answer:""}]}),h(!0)},oe=async t=>{if(window.confirm(`Are you sure you want to PERMANENTLY DELETE this product?
This cannot be undone.

To just hide it, use the eye toggle button instead.`))try{await g.delete(t),A()}catch(r){console.error("Failed to delete product:",r),alert("Failed to delete product")}},ce=async t=>{const r=t._id||t.id,s=!t.isActive,n=s?"activate":"deactivate";if(window.confirm(`Are you sure you want to ${n} "${t.name}"?`))try{await g.update(r,{isActive:s}),A()}catch(l){console.error(`Failed to ${n} product:`,l),alert(`Failed to ${n} product`)}},q=()=>{d({name:"",slug:"",overview:"",categoryId:"",isActive:!0,imageUrl:"",priceINR:"",priceSAR:"",features:[""],specifications:[{param:"",value:""}],faqs:[{question:"",answer:""}]}),Q(!1),_(null),U(null),z("url"),x.current&&(x.current.value="")},de=()=>d(t=>({...t,features:[...t.features,""]})),ue=t=>d(r=>({...r,features:r.features.length>1?r.features.filter((s,n)=>n!==t):[""]})),me=(t,r)=>d(s=>({...s,features:s.features.map((n,l)=>l===t?r:n)})),pe=()=>d(t=>({...t,specifications:[...t.specifications,{param:"",value:""}]})),ge=t=>d(r=>({...r,specifications:r.specifications.length>1?r.specifications.filter((s,n)=>n!==t):[{param:"",value:""}]})),J=(t,r,s)=>d(n=>({...n,specifications:n.specifications.map((l,a)=>a===t?{...l,[r]:s}:l)})),xe=()=>d(t=>({...t,faqs:[...t.faqs,{question:"",answer:""}]})),fe=t=>d(r=>({...r,faqs:r.faqs.length>1?r.faqs.filter((s,n)=>n!==t):[{question:"",answer:""}]})),V=(t,r,s)=>d(n=>({...n,faqs:n.faqs.map((l,a)=>a===t?{...l,[r]:s}:l)})),$=(t,r,s)=>{w({listType:t,dragIndex:r,overIndex:r}),s.dataTransfer.effectAllowed="move";const n=s.currentTarget;s.dataTransfer.setDragImage(n,n.offsetWidth/2,n.offsetHeight/2)},M=(t,r,s)=>{t.preventDefault(),t.dataTransfer.dropEffect="move",!(u.listType!==r||u.overIndex===s)&&w(n=>({...n,overIndex:s}))},L=(t,r,s)=>{if(t.preventDefault(),u.listType!==r)return;const n=u.dragIndex,l=s;if(n===l){w({listType:null,dragIndex:null,overIndex:null});return}d(a=>{const c=[...a[r]],[y]=c.splice(n,1);return c.splice(l,0,y),{...a,[r]:c}}),w({listType:null,dragIndex:null,overIndex:null})},O=()=>{w({listType:null,dragIndex:null,overIndex:null})},Z=t=>{const r=t.target.files?.[0];if(r){if(!r.type.startsWith("image/")){alert("Please select a valid image file");return}if(r.size>5*1024*1024){alert("Image size must be less than 5MB");return}const s=new FileReader;s.onload=n=>{const l=n.target?.result;d(a=>({...a,imageUrl:l})),U(l)},s.readAsDataURL(r)}},he=t=>{t.preventDefault(),t.stopPropagation();const r=t.dataTransfer?.files?.[0];if(r&&r.type.startsWith("image/")&&x.current){const s=new DataTransfer;s.items.add(r),x.current.files=s.files,Z({target:{files:s.files}})}},f=async t=>{const{name:r,value:s,type:n,checked:l}=t.target;if(n==="checkbox"){d(a=>({...a,[r]:l}));return}if(r==="name"){const a=s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");d(c=>({...c,name:s,slug:a}));return}if(r==="priceINR"){if(d(a=>({...a,priceINR:s})),s&&parseFloat(s)>0)try{const a=await be("INR","SAR"),c=(parseFloat(s)*a).toFixed(2);d(y=>({...y,priceSAR:c}))}catch(a){console.error("Currency conversion failed:",a)}else d(a=>({...a,priceSAR:""}));return}d(a=>({...a,[r]:s}))},be=async(t,r)=>{try{return(await(await fetch(`https://api.exchangerate-api.com/v4/latest/${t}`)).json()).rates[r]||.045}catch{return .045}},ye=[{label:"Product Name",key:"name",render:t=>e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-primary-text",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.slug})]})},{label:"Category",key:"category",render:t=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.category?.name||"N/A"})},{label:"Price (INR)",key:"price",render:t=>{const r=t.prices?.find(s=>s.currency==="INR");return r?e.jsxs("div",{className:"font-semibold text-green-700",children:["â‚¹",r.amount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}):e.jsx("span",{className:"text-gray-400",children:"N/A"})}},{label:"Price (SAR)",key:"priceSAR",render:t=>{const r=t.prices?.find(s=>s.currency==="SAR");return r?e.jsxs("div",{className:"font-semibold text-purple-700",children:["ï·¼",r.amount.toLocaleString("en-SA",{minimumFractionDigits:2,maximumFractionDigits:2})]}):e.jsx("span",{className:"text-gray-400",children:"N/A"})}},{label:"Status",key:"isActive",render:t=>e.jsx(Pe,{variant:t.isActive?"success":"default",children:t.isActive?"Active":"Inactive"})},{label:"Date Added",key:"createdAt",render:t=>e.jsx("span",{className:"text-sm text-gray-600",children:new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})},{label:"Actions",key:"actions",render:t=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>ce(t),className:`p-2 rounded-lg transition-colors ${t.isActive?"hover:bg-orange-50":"hover:bg-green-50"}`,title:t.isActive?"Deactivate product":"Activate product",children:t.isActive?e.jsx(Ie,{size:16,className:"text-orange-500"}):e.jsx(Se,{size:16,className:"text-green-600"})}),e.jsx("button",{onClick:()=>le(t),className:"p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit product",children:e.jsx(Fe,{size:16,className:"text-blue-600"})}),e.jsx("button",{onClick:()=>oe(t._id||t.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete product",children:e.jsx(Ce,{size:16,className:"text-red-600"})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-text",children:"Product Management"}),e.jsx("p",{className:"text-sm text-secondary-text mt-1",children:"Manage your product catalog and pricing"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(F,{variant:"outline",onClick:A,children:[e.jsx(ve,{className:"inline mr-2"})," Refresh"]}),e.jsxs(F,{onClick:()=>{q(),h(!0)},children:[e.jsx(S,{className:"inline mr-2"})," Add New Product"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-5 rounded-lg shadow-md",children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Products"}),e.jsx("h3",{className:"text-3xl font-bold mt-1",children:I.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-5 rounded-lg shadow-md",children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Active Products"}),e.jsx("h3",{className:"text-3xl font-bold mt-1",children:I.active})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-5 rounded-lg shadow-md",children:[e.jsx("p",{className:"text-orange-100 text-sm font-medium",children:"Inactive Products"}),e.jsx("h3",{className:"text-3xl font-bold mt-1",children:I.inactive})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-5 rounded-lg shadow-md",children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Categories"}),e.jsx("h3",{className:"text-3xl font-bold mt-1",children:T.length})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-border p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-primary-text mb-3 flex items-center gap-2",children:[e.jsx(je,{size:16})," Filters & Search"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search products...",value:P,onChange:t=>re(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("select",{value:j,onChange:t=>se(t.target.value),className:"px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"All Categories"}),X.map(t=>e.jsxs("optgroup",{label:t.name,children:[e.jsx("option",{value:t.id,children:t.name}),H(t.id).map(r=>e.jsxs("option",{value:r.id,children:["Â Â â†³ ",r.name]},r.id))]},t.id))]}),e.jsx("div",{className:"flex gap-2",children:["all","active","inactive"].map(t=>e.jsx("button",{onClick:()=>ae(t),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${N===t?t==="active"?"bg-green-600 text-white":t==="inactive"?"bg-orange-600 text-white":"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),(P||j||N!=="all")&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:e.jsxs("p",{className:"text-sm text-secondary-text",children:["Showing ",e.jsx("span",{className:"font-semibold text-primary-text",children:I.filtered})," of ",e.jsx("span",{className:"font-semibold text-primary-text",children:I.total})," products"]})})]}),E&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-border",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-secondary-text",children:"Loading products..."})]}),R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:R}),!E&&!R&&k.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-border",children:[e.jsx("p",{className:"text-secondary-text mb-4",children:b.length===0?"No products found. Add your first product!":"No products match your filters."}),b.length===0&&e.jsxs(F,{onClick:()=>h(!0),children:[e.jsx(S,{className:"inline mr-2"})," Add First Product"]})]}),!E&&!R&&k.length>0&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-border overflow-hidden",children:e.jsx(Re,{columns:ye,data:k})}),e.jsx(De,{isOpen:K,onClose:()=>{h(!1),q()},title:p?"Edit Product":"Add New Product",size:"lg",children:e.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-text mb-1",children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:f,required:!0,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-text mb-1",children:"Slug *"}),e.jsx("input",{type:"text",name:"slug",value:i.slug,onChange:f,required:!0,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"product-slug"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from name, can be edited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-text mb-1",children:"Category *"}),e.jsxs("select",{name:"categoryId",value:i.categoryId,onChange:f,required:!0,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select Category"}),X.map(t=>e.jsxs("optgroup",{label:`ðŸ“ ${t.name}`,children:[e.jsxs("option",{value:t.id,children:[t.name," (Parent)"]}),H(t.id).map(r=>e.jsxs("option",{value:r.id,children:["Â Â â†³ ",r.name]},r.id))]},t.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent category or subcategory"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-text mb-2",children:"Product Image"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>z("url"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${D==="url"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"ðŸ“Ž Paste URL (Recommended)"}),e.jsx("button",{type:"button",onClick:()=>z("file"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${D==="file"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"ðŸ“¤ Upload File"})]}),D==="url"&&e.jsxs("div",{children:[e.jsx("input",{type:"url",name:"imageUrl",value:i.imageUrl,onChange:f,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"https://example.com/product.jpg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"âœ“ Recommended: Fast and reliable"})]}),D==="file"&&e.jsxs("div",{onDrop:he,onDragOver:t=>{t.preventDefault(),t.stopPropagation()},className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary hover:bg-blue-50 transition-colors cursor-pointer",onClick:()=>x.current?.click(),children:[e.jsx(we,{size:24,className:"mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Drag and drop image here"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"or click to select (Max 5MB)"}),e.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:Z,className:"hidden"})]}),i.imageUrl&&e.jsxs("div",{className:"mt-3 relative",children:[e.jsx("div",{className:"p-2 border border-border rounded-lg bg-gray-50",children:e.jsx("img",{src:i.imageUrl,alt:"Product preview",className:"max-h-48 object-cover rounded mx-auto",onError:t=>{t.target.style.display="none"}})}),e.jsx("button",{type:"button",onClick:()=>{d(t=>({...t,imageUrl:""})),U(null),x.current&&(x.current.value="")},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition-colors",title:"Remove image",children:e.jsx(Ae,{size:14})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-text mb-2",children:["Product Price ",!p&&"*"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["ðŸ’¡ ",e.jsx("strong",{children:"Auto-Currency Conversion:"})," Enter price in INR (â‚¹). SAR (ï·¼) will be automatically calculated."]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Price in INR (â‚¹) ",!p&&"*"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",name:"priceINR",step:"0.01",min:"0.01",value:i.priceINR,onChange:f,required:!p,className:"flex-1 px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter price in INR"}),e.jsx("div",{className:"px-4 py-2 bg-gray-100 border border-border rounded-lg text-gray-700 font-medium min-w-[80px] flex items-center justify-center",children:"INR â‚¹"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Price in SAR (ï·¼) - Auto-calculated"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",name:"priceSAR",step:"0.01",value:i.priceSAR,readOnly:!0,disabled:!0,className:"flex-1 px-4 py-2 border border-border rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed",placeholder:"Will be auto-calculated from INR"}),e.jsx("div",{className:"px-4 py-2 bg-gray-100 border border-border rounded-lg text-gray-700 font-medium min-w-[80px] flex items-center justify-center",children:"SAR ï·¼"})]}),i.priceSAR&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"âœ“ Converted at real-time rate"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-text mb-1",children:"Description"}),e.jsx("textarea",{name:"overview",value:i.overview,onChange:f,className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:"4",placeholder:"Product description..."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-text",children:"Features"}),i.features.length>1&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(v,{size:12})," Drag to reorder"]})]}),e.jsxs("div",{className:"space-y-2",children:[i.features.map((t,r)=>e.jsxs("div",{draggable:!0,onDragStart:s=>$("features",r,s),onDragOver:s=>M(s,"features",r),onDrop:s=>L(s,"features",r),onDragEnd:O,className:`flex gap-2 items-center rounded-lg transition-all duration-150 ${u.listType==="features"&&u.dragIndex===r?"opacity-40 scale-[0.97]":u.listType==="features"&&u.overIndex===r&&u.dragIndex!==r?"border-t-2 border-blue-400":""}`,children:[e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 p-1 shrink-0",title:"Drag to reorder",children:e.jsx(v,{size:16})}),e.jsx("input",{type:"text",value:t,onChange:s=>me(r,s.target.value),className:"flex-1 px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:`Feature ${r+1}`}),e.jsx("button",{type:"button",onClick:()=>ue(r),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors shrink-0",title:"Remove feature",children:e.jsx(B,{size:16})})]},r)),e.jsxs("button",{type:"button",onClick:de,className:"flex items-center gap-1 text-sm text-blue-600 font-medium hover:underline",children:[e.jsx(S,{size:14})," Add Feature"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-text",children:"Specifications"}),i.specifications.length>1&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(v,{size:12})," Drag to reorder"]})]}),e.jsxs("div",{className:"space-y-2",children:[i.specifications.map((t,r)=>e.jsxs("div",{draggable:!0,onDragStart:s=>$("specifications",r,s),onDragOver:s=>M(s,"specifications",r),onDrop:s=>L(s,"specifications",r),onDragEnd:O,className:`flex gap-2 items-center rounded-lg transition-all duration-150 ${u.listType==="specifications"&&u.dragIndex===r?"opacity-40 scale-[0.97]":u.listType==="specifications"&&u.overIndex===r&&u.dragIndex!==r?"border-t-2 border-blue-400":""}`,children:[e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 p-1 shrink-0",title:"Drag to reorder",children:e.jsx(v,{size:16})}),e.jsx("input",{type:"text",value:t.param,onChange:s=>J(r,"param",s.target.value),className:"flex-1 px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Parameter name"}),e.jsx("input",{type:"text",value:t.value,onChange:s=>J(r,"value",s.target.value),className:"flex-1 px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Value"}),e.jsx("button",{type:"button",onClick:()=>ge(r),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors shrink-0",title:"Remove specification",children:e.jsx(B,{size:16})})]},r)),e.jsxs("button",{type:"button",onClick:pe,className:"flex items-center gap-1 text-sm text-blue-600 font-medium hover:underline",children:[e.jsx(S,{size:14})," Add Specification"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-text",children:"FAQs"}),i.faqs.length>1&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(v,{size:12})," Drag to reorder"]})]}),e.jsxs("div",{className:"space-y-3",children:[i.faqs.map((t,r)=>e.jsxs("div",{draggable:!0,onDragStart:s=>$("faqs",r,s),onDragOver:s=>M(s,"faqs",r),onDrop:s=>L(s,"faqs",r),onDragEnd:O,className:`p-3 border border-border rounded-lg bg-gray-50 space-y-2 transition-all duration-150 ${u.listType==="faqs"&&u.dragIndex===r?"opacity-40 scale-[0.97]":u.listType==="faqs"&&u.overIndex===r&&u.dragIndex!==r?"border-t-2 border-blue-400 bg-blue-50":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",title:"Drag to reorder",children:e.jsx(v,{size:14})}),e.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:["FAQ #",r+1]})]}),e.jsx("button",{type:"button",onClick:()=>fe(r),className:"p-1 text-red-500 hover:bg-red-100 rounded transition-colors",title:"Remove FAQ",children:e.jsx(B,{size:14})})]}),e.jsx("input",{type:"text",value:t.question,onChange:s=>V(r,"question",s.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Question"}),e.jsx("textarea",{value:t.answer,onChange:s=>V(r,"answer",s.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:"2",placeholder:"Answer"})]},r)),e.jsxs("button",{type:"button",onClick:xe,className:"flex items-center gap-1 text-sm text-blue-600 font-medium hover:underline",children:[e.jsx(S,{size:14})," Add FAQ"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:i.isActive,onChange:f,className:"rounded"}),e.jsx("label",{className:"text-sm font-medium",children:"Product is Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[e.jsx(F,{variant:"outline",type:"button",onClick:()=>{h(!1),q()},children:"Cancel"}),e.jsx(F,{type:"submit",children:p?"Update Product":"Create Product"})]})]})})]})};export{Be as default};
