import{j as e}from"./vendor-query-Bcn4Fvtg.js";import{r as l,L as O,u as he,f as pe}from"./vendor-react-DbHp_wuh.js";import{n as w,j as V,o as J,p as K,q as ee,r as xe,m as je,s as se,f as ge,t as Ne,u as ae,v as A,w as ve,x as fe,y as be,i as ye,e as Ce,z as W,A as ke,B as X,h as Pe}from"./index-CDJVr2wI.js";import{a as Se,b as we}from"./useProducts-D7jbvMYx.js";import{u as Fe}from"./useCategories-DkaUoZVv.js";import{u as ze}from"./useIndustries-j6syjGEe.js";import"./vendor-icons-BV48wJe3.js";import"./api--gIgMF1d.js";const qe=({productSlug:h,onClose:d})=>{const{data:r,isLoading:g,error:F}=Se(h),[N,z]=l.useState("overview"),[n,v]=l.useState(0);l.useEffect(()=>{const a=i=>{i.key==="Escape"&&d()};return document.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",a),document.body.style.overflow="unset"}},[d]);const o=r?[r.imageUrl,...r.images||[]].filter(Boolean):[],C=()=>{v(a=>(a+1)%o.length)},f=()=>{v(a=>(a-1+o.length)%o.length)},b=a=>a?`${a.currency==="INR"?"â‚¹":a.currency==="SAR"?"Ø±.Ø³":"$"}${a.amount?.toLocaleString()}`:null,t=()=>!r?.prices||r.prices.length===0?null:r.prices[0],m=[{id:"overview",label:"Overview",icon:V},{id:"features",label:"Features",icon:se},{id:"specs",label:"Specifications",icon:ge},{id:"faqs",label:"FAQs",icon:Ne}];return e.jsx("div",{className:"product-modal-overlay",onClick:d,children:e.jsxs("div",{className:"product-modal",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{className:"product-modal-close",onClick:d,children:e.jsx(w,{size:24})}),g&&e.jsxs("div",{className:"product-modal-loading",children:[e.jsx("div",{className:"product-modal-spinner"}),e.jsx("p",{children:"Loading product details..."})]}),F&&e.jsxs("div",{className:"product-modal-error",children:[e.jsx("p",{children:"Failed to load product details"}),e.jsx("button",{onClick:d,children:"Close"})]}),r&&!g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"product-modal-header",children:[e.jsxs("div",{className:"product-modal-gallery",children:[e.jsxs("div",{className:"product-modal-image-main",children:[o.length>0?e.jsx("img",{src:o[n],alt:r.name,onError:a=>{a.target.src="https://via.placeholder.com/400x400?text=No+Image"}}):e.jsxs("div",{className:"product-modal-no-image",children:[e.jsx(V,{size:64}),e.jsx("span",{children:"No Image"})]}),o.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"gallery-nav prev",onClick:f,children:e.jsx(J,{size:24})}),e.jsx("button",{className:"gallery-nav next",onClick:C,children:e.jsx(K,{size:24})})]})]}),o.length>1&&e.jsx("div",{className:"product-modal-thumbnails",children:o.map((a,i)=>e.jsx("button",{className:`thumbnail ${i===n?"active":""}`,onClick:()=>v(i),children:e.jsx("img",{src:a,alt:`${r.name} ${i+1}`})},i))})]}),e.jsxs("div",{className:"product-modal-info",children:[e.jsxs("div",{className:"product-modal-tags",children:[r.category&&e.jsxs("span",{className:"product-tag category",children:[e.jsx(ee,{size:12}),r.category.name]}),r.industries?.slice(0,2).map((a,i)=>e.jsx("span",{className:"product-tag industry",children:a.industry?.name||a.name},i))]}),e.jsx("h1",{className:"product-modal-title",children:r.name}),t()&&e.jsxs("div",{className:"product-modal-price",children:[e.jsx("span",{className:"price-label",children:"Starting from"}),e.jsx("span",{className:"price-value",children:b(t())}),r.prices?.length>1&&e.jsxs("span",{className:"price-more",children:["+",r.prices.length-1," more currencies"]})]}),r.prices?.length>0&&e.jsx("div",{className:"product-modal-all-prices",children:r.prices.map((a,i)=>e.jsxs("div",{className:"price-item",children:[e.jsx("span",{className:"price-currency",children:a.currency}),e.jsx("span",{className:"price-amount",children:b(a)})]},i))}),e.jsxs("div",{className:"product-modal-actions",children:[e.jsxs(O,{to:"/rfq",className:"product-modal-btn primary",children:[e.jsx(xe,{size:18}),"Request Quote"]}),e.jsxs(O,{to:`/products/${r.slug}`,className:"product-modal-btn secondary",children:[e.jsx(je,{size:18}),"Full Details"]})]})]})]}),e.jsx("div",{className:"product-modal-tabs",children:m.map(a=>e.jsxs("button",{className:`product-modal-tab ${N===a.id?"active":""}`,onClick:()=>z(a.id),children:[e.jsx(a.icon,{size:16}),a.label]},a.id))}),e.jsxs("div",{className:"product-modal-content",children:[N==="overview"&&e.jsx("div",{className:"tab-content overview",children:e.jsx("p",{className:"product-overview-text",children:r.overview||"No overview available for this product."})}),N==="features"&&e.jsx("div",{className:"tab-content features",children:r.features?.length>0?e.jsx("ul",{className:"features-list",children:r.features.map((a,i)=>e.jsxs("li",{className:"feature-item",children:[e.jsx("span",{className:"feature-bullet"}),e.jsx("span",{className:"feature-text",children:a.title})]},i))}):e.jsx("p",{className:"empty-tab",children:"No features listed for this product."})}),N==="specs"&&e.jsx("div",{className:"tab-content specifications",children:r.specifications?.length>0?e.jsx("table",{className:"specs-table",children:e.jsx("tbody",{children:r.specifications.map((a,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"spec-param",children:a.parameter}),e.jsx("td",{className:"spec-value",children:a.value})]},i))})}):e.jsx("p",{className:"empty-tab",children:"No specifications available."})}),N==="faqs"&&e.jsx("div",{className:"tab-content faqs",children:r.faqs?.length>0?e.jsx("div",{className:"faqs-list",children:r.faqs.map((a,i)=>e.jsxs("div",{className:"faq-item",children:[e.jsx("h4",{className:"faq-question",children:a.question}),e.jsx("p",{className:"faq-answer",children:a.answer})]},i))}):e.jsx("p",{className:"empty-tab",children:"No FAQs available for this product."})})]})]})]})})},Ie=()=>{const h=he(),{cart:d,isCartOpen:r,closeCart:g,incrementQuantity:F,decrementQuantity:N,removeFromCart:z,getCartCount:n}=ae(),v=t=>!t.prices||t.prices.length===0?0:t.prices[0].amount||0,o=t=>{if(!t.prices||t.prices.length===0)return"â‚¹0";const m=t.prices[0];return`${m.currency==="INR"?"â‚¹":m.currency==="SAR"?"Ø±.Ø³":"$"}${(m.amount||0).toLocaleString()}`},C=t=>t.category?.name?t.category.name:"Product",f=()=>d.reduce((t,m)=>{const a=v(m);return t+a*m.quantity},0),b=()=>{g(),h("/rfq",{state:{fromCart:!0}})};return r?e.jsx("div",{className:"cart-modal-overlay",onClick:g,children:e.jsxs("div",{className:"cart-modal",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{className:"cart-modal-close",onClick:g,children:e.jsx(w,{size:24})}),e.jsx("div",{className:"cart-modal-header",children:e.jsxs("div",{className:"cart-modal-title-section",children:[e.jsx(A,{size:28,className:"cart-icon"}),e.jsxs("div",{children:[e.jsx("h2",{className:"cart-modal-title",children:"Shopping Cart"}),e.jsxs("p",{className:"cart-modal-count",children:[n()," ",n()===1?"item":"items"," added"]})]})]})}),e.jsx("div",{className:"cart-modal-body",children:d.length===0?e.jsxs("div",{className:"cart-modal-empty",children:[e.jsx(A,{size:64}),e.jsx("h3",{children:"Your cart is empty"}),e.jsx("p",{children:"Add products to get started with your order"}),e.jsx("button",{className:"cart-empty-btn",onClick:g,children:"Continue Shopping"})]}):e.jsx("div",{className:"cart-modal-items",children:d.map(t=>e.jsxs("div",{className:"cart-item",children:[e.jsx("div",{className:"cart-item-image",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name}):e.jsx("div",{className:"cart-item-no-image",children:e.jsx(A,{size:24})})}),e.jsxs("div",{className:"cart-item-details",children:[e.jsx("span",{className:"cart-item-category",children:C(t)}),e.jsx("h4",{className:"cart-item-name",children:t.name}),e.jsx("span",{className:"cart-item-price",children:o(t)})]}),e.jsxs("div",{className:"cart-item-controls",children:[e.jsxs("div",{className:"quantity-control",children:[e.jsx("button",{onClick:()=>N(t.id),disabled:t.quantity<=1,children:e.jsx(ve,{size:14})}),e.jsx("span",{children:t.quantity}),e.jsx("button",{onClick:()=>F(t.id),children:e.jsx(fe,{size:14})})]}),e.jsx("button",{className:"cart-item-remove",onClick:()=>z(t.id),children:e.jsx(be,{size:16})})]})]},t.id))})}),d.length>0&&e.jsxs("div",{className:"cart-modal-footer",children:[e.jsxs("div",{className:"cart-modal-total",children:[e.jsxs("div",{className:"total-info",children:[e.jsx("span",{className:"total-label",children:"Estimated Total"}),e.jsxs("span",{className:"total-amount",children:["â‚¹",f().toLocaleString()]})]}),e.jsx("span",{className:"total-note",children:"Final price will be confirmed in quotation"})]}),e.jsxs("div",{className:"cart-modal-actions",children:[e.jsxs("button",{className:"cart-cancel-btn",onClick:g,children:[e.jsx(w,{size:18}),"Continue Shopping"]}),e.jsxs("button",{className:"cart-rfq-btn",onClick:b,children:[e.jsx(ye,{size:18}),"Proceed to RFQ"]})]}),e.jsx("p",{className:"cart-footer-note",children:"You'll be asked for company details on the next page"})]})]})}):null},Qe=()=>{const[h,d]=pe(),{cart:r,addToCart:g,removeFromCart:F,getCartCount:N,openCart:z}=ae(),[n,v]=l.useState(h.get("search")||""),[o,C]=l.useState(!1),[f,b]=l.useState("grid"),[t,m]=l.useState(h.get("categoryId")||""),[a,i]=l.useState(h.get("industryId")||""),[k,H]=l.useState(h.get("sort")||"newest"),[u,q]=l.useState(parseInt(h.get("page"))||1),[p,T]=l.useState(h.get("currency")||""),[x,$]=l.useState(h.get("minPrice")||""),[j,L]=l.useState(h.get("maxPrice")||""),[_,D]=l.useState(null),te=12,ce=l.useMemo(()=>{const s={page:u,limit:te,sort:k};return n&&(s.search=n),t&&(s.categoryId=t),a&&(s.industryId=a),p&&(x||j)&&(s.currency=p,x&&(s.minPrice=x),j&&(s.maxPrice=j)),s},[u,k,n,t,a,p,x,j]),{data:G,isLoading:I,error:R}=we(ce),{data:U=[]}=Fe(),{data:Q=[]}=ze(),P=G?.data||[],S=G?.meta||{total:0,totalPages:1};l.useEffect(()=>{const s=new URLSearchParams;n&&s.set("search",n),t&&s.set("categoryId",t),a&&s.set("industryId",a),k!=="newest"&&s.set("sort",k),u>1&&s.set("page",u.toString()),p&&s.set("currency",p),x&&s.set("minPrice",x),j&&s.set("maxPrice",j),d(s,{replace:!0})},[n,t,a,k,u,p,x,j,d]);const y=()=>{q(1)},re=s=>{m(s),y()},ie=s=>{i(s),y()},le=s=>{H(s),y()},ne=s=>{s.preventDefault(),y()},Y=()=>{m(""),i(""),T(""),$(""),L(""),v(""),H("newest"),q(1)},Z=s=>{D(s)},oe=()=>{D(null)},B=s=>r.some(c=>c.id===s),de=(s,c)=>{s.stopPropagation(),B(c.id)?F(c.id):g({id:c.id,name:c.name,slug:c.slug,imageUrl:c.imageUrl,prices:c.prices,category:c.category})},me=s=>{if(!s||s.length===0)return null;const c=s[0];return`${c.currency==="INR"?"â‚¹":c.currency==="SAR"?"Ø±.Ø³":"$"}${c.amount?.toLocaleString()}`},ue=()=>{const s=[],c=S.totalPages;if(c<=5)for(let M=1;M<=c;M++)s.push(M);else u<=3?s.push(1,2,3,4,"...",c):u>=c-2?s.push(1,"...",c-3,c-2,c-1,c):s.push(1,"...",u-1,u,u+1,"...",c);return s},E=t||a||p||x||j;return e.jsxs("div",{className:"products-page",children:[e.jsx("section",{className:"products-hero",children:e.jsxs("div",{className:"products-hero-content",children:[e.jsxs("nav",{className:"products-breadcrumb",children:[e.jsx(O,{to:"/",children:"Home"})," / ",e.jsx("span",{children:"Products"})]}),e.jsxs("h1",{className:"products-hero-title",children:["Explore Our ",e.jsx("span",{children:"Products"})]}),e.jsx("p",{className:"products-hero-subtitle",children:"Browse through our extensive catalog of quality B2B products. Find what you need from verified suppliers."}),e.jsxs("form",{onSubmit:ne,className:"products-search-bar",children:[e.jsx(Ce,{size:22,className:"products-search-icon"}),e.jsx("input",{type:"text",value:n,onChange:s=>v(s.target.value),placeholder:"Search products by name or description..."}),e.jsx("button",{type:"submit",className:"products-search-btn",children:"Search Products"})]}),e.jsxs("div",{className:"products-quick-stats",children:[e.jsxs("div",{className:"quick-stat",children:[e.jsxs("span",{className:"quick-stat-value",children:[S.total||P.length,"+"]}),e.jsx("span",{className:"quick-stat-label",children:"Products"})]}),e.jsxs("div",{className:"quick-stat",children:[e.jsxs("span",{className:"quick-stat-value",children:[U.length,"+"]}),e.jsx("span",{className:"quick-stat-label",children:"Categories"})]}),e.jsxs("div",{className:"quick-stat",children:[e.jsxs("span",{className:"quick-stat-value",children:[Q.length,"+"]}),e.jsx("span",{className:"quick-stat-label",children:"Industries"})]})]})]})}),e.jsxs("div",{className:"products-content",children:[e.jsxs("button",{className:"products-mobile-filter-toggle",onClick:()=>C(!o),children:[e.jsx(W,{size:18}),o?"Hide Filters":"Show Filters"]}),e.jsx("aside",{className:`products-sidebar ${o?"open":""}`,children:e.jsxs("div",{className:"products-filter-card",children:[e.jsxs("div",{className:"products-filter-header",children:[e.jsxs("h2",{className:"products-filter-title",children:[e.jsx(W,{size:18})," Filters"]}),E&&e.jsx("button",{className:"products-filter-clear",onClick:Y,children:"Clear All"})]}),e.jsxs("div",{className:"products-filter-group",children:[e.jsx("label",{className:"products-filter-label",children:"Category"}),e.jsxs("select",{className:"products-filter-select",value:t,onChange:s=>re(s.target.value),children:[e.jsx("option",{value:"",children:"All Categories"}),U.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"products-filter-group",children:[e.jsx("label",{className:"products-filter-label",children:"Industry"}),e.jsxs("select",{className:"products-filter-select",value:a,onChange:s=>ie(s.target.value),children:[e.jsx("option",{value:"",children:"All Industries"}),Q.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"products-filter-group",children:[e.jsx("label",{className:"products-filter-label",children:"Price Range"}),e.jsxs("select",{className:"products-filter-select",value:p,onChange:s=>{T(s.target.value),s.target.value||($(""),L("")),y()},children:[e.jsx("option",{value:"",children:"Select Currency"}),e.jsx("option",{value:"INR",children:"â‚¹ INR"}),e.jsx("option",{value:"SAR",children:"Ø±.Ø³ SAR"})]}),p&&e.jsxs("div",{className:"products-price-inputs",children:[e.jsx("input",{type:"number",placeholder:"Min",value:x,onChange:s=>{$(s.target.value),y()},className:"products-price-input"}),e.jsx("span",{className:"products-price-separator",children:"to"}),e.jsx("input",{type:"number",placeholder:"Max",value:j,onChange:s=>{L(s.target.value),y()},className:"products-price-input"})]})]}),e.jsx("button",{className:"products-apply-btn",onClick:()=>C(!1),children:"Apply Filters"})]})}),e.jsxs("main",{className:"products-main",children:[e.jsxs("div",{className:"products-toolbar",children:[e.jsx("p",{className:"products-results-count",children:I?"Loading products...":e.jsxs(e.Fragment,{children:["Showing ",e.jsx("strong",{children:P.length})," of ",e.jsx("strong",{children:S.total})," products"]})}),e.jsxs("div",{className:"products-view-options",children:[e.jsx("button",{className:`products-view-btn ${f==="grid"?"active":""}`,onClick:()=>b("grid"),title:"Grid View",children:e.jsx(ke,{size:18})}),e.jsx("button",{className:`products-view-btn ${f==="list"?"active":""}`,onClick:()=>b("list"),title:"List View",children:e.jsx(se,{size:18})}),e.jsxs("select",{className:"products-sort-select",value:k,onChange:s=>le(s.target.value),children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"a-z",children:"Name (A-Z)"}),e.jsx("option",{value:"z-a",children:"Name (Z-A)"}),e.jsx("option",{value:"price_asc",children:"Price: Low to High"}),e.jsx("option",{value:"price_desc",children:"Price: High to Low"})]})]})]}),E&&e.jsxs("div",{className:"products-active-filters",children:[t&&e.jsxs("span",{className:"active-filter-tag",children:[U.find(s=>s.id===t)?.name||"Category",e.jsx("button",{onClick:()=>m(""),children:e.jsx(w,{size:14})})]}),a&&e.jsxs("span",{className:"active-filter-tag",children:[Q.find(s=>s.id===a)?.name||"Industry",e.jsx("button",{onClick:()=>i(""),children:e.jsx(w,{size:14})})]}),p&&(x||j)&&e.jsxs("span",{className:"active-filter-tag",children:[p,": ",x||"0"," - ",j||"âˆž",e.jsx("button",{onClick:()=>{T(""),$(""),L("")},children:e.jsx(w,{size:14})})]})]}),R&&e.jsxs("div",{className:"products-empty-state",children:[e.jsx("div",{className:"products-empty-icon",children:"âš ï¸"}),e.jsx("h3",{className:"products-empty-title",children:"Unable to Load Products"}),e.jsx("p",{className:"products-empty-text",children:R?.response?.data?.message||"Please try again later."})]}),I&&e.jsx("div",{className:`products-grid ${f==="list"?"list-view":""}`,children:[...Array(6)].map((s,c)=>e.jsxs("div",{className:"product-card-skeleton",children:[e.jsx("div",{className:"skeleton-image"}),e.jsxs("div",{className:"skeleton-content",children:[e.jsx("div",{className:"skeleton-tag"}),e.jsx("div",{className:"skeleton-title"}),e.jsx("div",{className:"skeleton-price"}),e.jsx("div",{className:"skeleton-actions"})]})]},c))}),!I&&!R&&P.length===0&&e.jsxs("div",{className:"products-empty-state",children:[e.jsx("div",{className:"products-empty-icon",children:"ðŸ“¦"}),e.jsx("h3",{className:"products-empty-title",children:"No Products Found"}),e.jsx("p",{className:"products-empty-text",children:n||E?"Try adjusting your search or filters to find more products.":"Check back soon for new products!"}),E&&e.jsx("button",{className:"products-clear-btn",onClick:Y,children:"Clear All Filters"})]}),!I&&!R&&P.length>0&&e.jsx("div",{className:`products-grid ${f==="list"?"list-view":""}`,children:P.map(s=>e.jsxs("article",{className:"product-card",onClick:()=>Z(s.slug),children:[e.jsxs("div",{className:"product-card-image",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name,onError:c=>{c.target.src="https://via.placeholder.com/300x300?text=No+Image"}}):e.jsx("div",{className:"product-card-no-image",children:e.jsx(V,{size:40})}),e.jsx("div",{className:"product-card-overlay",children:e.jsxs("span",{className:"product-quick-view",children:[e.jsx(X,{size:20}),"Quick View"]})})]}),e.jsxs("div",{className:"product-card-content",children:[s.category&&e.jsxs("span",{className:"product-card-category",children:[e.jsx(ee,{size:12}),s.category.name]}),e.jsx("h3",{className:"product-card-name",children:s.name}),e.jsxs("p",{className:"product-card-overview",children:[s.overview?.slice(0,80),s.overview?.length>80?"...":""]}),s.prices?.length>0&&e.jsxs("div",{className:"product-card-price",children:[e.jsx("span",{className:"price-from",children:"From"}),e.jsx("span",{className:"price-amount",children:me(s.prices)})]}),e.jsxs("div",{className:"product-card-actions",children:[e.jsxs("button",{className:"product-card-btn view",onClick:c=>{c.stopPropagation(),Z(s.slug)},children:[e.jsx(X,{size:16})," View"]}),e.jsx("button",{className:`product-card-btn order ${B(s.id)?"in-cart":""}`,onClick:c=>de(c,s),children:B(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{size:16})," Added"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{size:16})," Order"]})})]})]})]},s.id))}),!I&&P.length>0&&S.totalPages>1&&e.jsxs("nav",{className:"products-pagination",children:[e.jsx("button",{className:"products-page-btn",disabled:u===1,onClick:()=>q(s=>Math.max(1,s-1)),children:e.jsx(J,{size:18})}),ue().map((s,c)=>s==="..."?e.jsx("span",{className:"products-page-ellipsis",children:"..."},`ellipsis-${c}`):e.jsx("button",{className:`products-page-btn ${u===s?"active":""}`,onClick:()=>q(s),children:s},s)),e.jsx("button",{className:"products-page-btn",disabled:u===S.totalPages,onClick:()=>q(s=>Math.min(S.totalPages,s+1)),children:e.jsx(K,{size:18})})]})]})]}),_&&e.jsx(qe,{productSlug:_,onClose:oe}),N()>0&&e.jsxs("button",{className:"products-floating-cart",onClick:z,children:[e.jsx(A,{size:24}),e.jsx("span",{className:"cart-count",children:N()}),e.jsx("span",{className:"cart-label",children:"View Cart"})]}),e.jsx(Ie,{})]})};export{Qe as default};
