import{j as s}from"./vendor-query-Bcn4Fvtg.js";import{f as D,r as l,L as k}from"./vendor-react-DbHp_wuh.js";import{e as O,z as P,A as _,s as G,D as q,l as W,k as H,a as R,E as Z,m as J,r as K,o as Q,p as X}from"./index-CDJVr2wI.js";import{a as Y}from"./useSuppliers-DuMa4gxZ.js";import{u as ss}from"./useCategories-DkaUoZVv.js";import{u as es}from"./useIndustries-j6syjGEe.js";import"./vendor-icons-BV48wJe3.js";import"./api--gIgMF1d.js";const os=()=>{const[h,v]=D(),[r,b]=l.useState(h.get("search")||""),[N,f]=l.useState(!1),[u,y]=l.useState("grid"),[t,S]=l.useState(h.get("supplierType")||""),[n,w]=l.useState(h.get("industryId")||""),[c,C]=l.useState(h.get("sort")||"newest"),[a,m]=l.useState(parseInt(h.get("page"))||1),E=12,z=l.useMemo(()=>{const e={page:a,limit:E,sort:c};return r&&(e.search=r),t&&(e.supplierType=t),n&&(e.industryId=n),e},[a,c,r,t,n]),{data:F,isLoading:p,error:x}=Y(z),{data:A=[]}=ss(),{data:T=[]}=es(),d=F?.data||[],o=F?.meta||{total:0,totalPages:1};l.useEffect(()=>{const e=new URLSearchParams;r&&e.set("search",r),t&&e.set("supplierType",t),n&&e.set("industryId",n),c!=="newest"&&e.set("sort",c),a>1&&e.set("page",a.toString()),v(e,{replace:!0})},[r,t,n,c,a,v]);const j=()=>{m(1)},I=[{value:"MANUFACTURER",label:"Manufacturer"},{value:"TRADER",label:"Trader"},{value:"CONTRACTOR",label:"Contractor"},{value:"SERVICE_PROVIDER",label:"Service Provider"}],U=e=>{S(t===e?"":e),j()},B=e=>{w(e),j()},M=e=>{C(e),j()},L=e=>{e.preventDefault(),j()},V=e=>({MANUFACTURER:"Manufacturer",TRADER:"Trader",CONTRACTOR:"Contractor",SERVICE_PROVIDER:"Service Provider"})[e]||"Supplier",$=()=>{const e=[],i=o.totalPages;if(i<=5)for(let g=1;g<=i;g++)e.push(g);else a<=3?e.push(1,2,3,4,"...",i):a>=i-2?e.push(1,"...",i-3,i-2,i-1,i):e.push(1,"...",a-1,a,a+1,"...",i);return e};return s.jsxs("div",{className:"listings-page",children:[s.jsx("section",{className:"listings-hero",children:s.jsxs("div",{className:"listings-hero-content",children:[s.jsxs("nav",{className:"listings-breadcrumb",children:[s.jsx(k,{to:"/",children:"Home"})," / ",s.jsx("span",{children:"Suppliers Directory"})]}),s.jsxs("h1",{className:"listings-hero-title",children:["Find ",s.jsx("span",{children:"Verified Suppliers"})]}),s.jsx("p",{className:"listings-hero-subtitle",children:"Connect with trusted B2B suppliers and manufacturers worldwide. Browse our curated network of verified business partners."}),s.jsxs("form",{onSubmit:L,className:"listings-search-bar",children:[s.jsx(O,{size:22,className:"listings-search-icon"}),s.jsx("input",{type:"text",value:r,onChange:e=>b(e.target.value),placeholder:"Search by company name, product, or industry..."}),s.jsx("button",{type:"submit",className:"listings-search-btn",children:"Search Suppliers"})]}),s.jsxs("div",{className:"listings-stats-row",children:[s.jsxs("div",{className:"listings-stat",children:[s.jsxs("span",{className:"listings-stat-number",children:[o.total||d.length,"+"]}),s.jsx("span",{className:"listings-stat-label",children:"Total Suppliers"})]}),s.jsxs("div",{className:"listings-stat",children:[s.jsxs("span",{className:"listings-stat-number",children:[T.length,"+"]}),s.jsx("span",{className:"listings-stat-label",children:"Industries"})]}),s.jsxs("div",{className:"listings-stat",children:[s.jsxs("span",{className:"listings-stat-number",children:[A.length,"+"]}),s.jsx("span",{className:"listings-stat-label",children:"Categories"})]})]})]})}),s.jsxs("div",{className:"listings-content",children:[s.jsxs("button",{className:"listings-mobile-filter-toggle",onClick:()=>f(!N),children:[s.jsx(P,{size:18}),N?"Hide Filters":"Show Filters"]}),s.jsx("aside",{className:`listings-sidebar ${N?"open":""}`,children:s.jsxs("div",{className:"listings-filter-card",children:[s.jsxs("div",{className:"listings-filter-header",children:[s.jsxs("h2",{className:"listings-filter-title",children:[s.jsx(P,{size:18})," Filters"]}),s.jsx("button",{className:"listings-filter-clear",onClick:()=>{S(""),w(""),b(""),C("newest"),m(1)},children:"Clear All"})]}),s.jsxs("div",{className:"listings-filter-group",children:[s.jsx("label",{className:"listings-filter-label",children:"Business Type"}),s.jsx("div",{className:"listings-filter-options",children:I.map(e=>s.jsxs("label",{className:"listings-filter-option",children:[s.jsx("input",{type:"radio",name:"supplierType",checked:t===e.value,onChange:()=>U(e.value)}),s.jsx("span",{className:"listings-filter-option-text",children:e.label})]},e.value))})]}),s.jsxs("div",{className:"listings-filter-group",children:[s.jsx("label",{className:"listings-filter-label",children:"Industry"}),s.jsxs("select",{className:"listings-filter-select",value:n,onChange:e=>B(e.target.value),children:[s.jsx("option",{value:"",children:"All Industries"}),T.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsx("button",{className:"listings-apply-btn",onClick:()=>f(!1),children:"Apply Filters"})]})}),s.jsxs("main",{className:"listings-main",children:[s.jsxs("div",{className:"listings-toolbar",children:[s.jsx("p",{className:"listings-results-count",children:p?"Loading suppliers...":s.jsxs(s.Fragment,{children:["Showing ",s.jsx("strong",{children:d.length})," of ",s.jsx("strong",{children:o.total})," suppliers"]})}),s.jsxs("div",{className:"listings-view-options",children:[s.jsx("button",{className:`listings-view-btn ${u==="grid"?"active":""}`,onClick:()=>y("grid"),title:"Grid View",children:s.jsx(_,{size:18})}),s.jsx("button",{className:`listings-view-btn ${u==="list"?"active":""}`,onClick:()=>y("list"),title:"List View",children:s.jsx(G,{size:18})}),s.jsxs("select",{className:"listings-sort-select",value:c,onChange:e=>M(e.target.value),children:[s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"oldest",children:"Oldest First"}),s.jsx("option",{value:"a-z",children:"Name (A-Z)"}),s.jsx("option",{value:"z-a",children:"Name (Z-A)"})]})]})]}),x&&s.jsxs("div",{className:"listings-empty-state",children:[s.jsx("div",{className:"listings-empty-icon",children:"âš ï¸"}),s.jsx("h3",{className:"listings-empty-title",children:"Unable to Load Suppliers"}),s.jsx("p",{className:"listings-empty-text",children:x?.response?.data?.message||"Please try again later."})]}),p&&s.jsx("div",{className:`suppliers-grid ${u==="list"?"list-view":""}`,children:[...Array(6)].map((e,i)=>s.jsxs("div",{className:"supplier-card-skeleton",children:[s.jsx("div",{className:"skeleton-shimmer",style:{width:"72px",height:"72px",marginBottom:"16px"}}),s.jsx("div",{className:"skeleton-shimmer",style:{width:"60%",height:"24px",marginBottom:"12px"}}),s.jsx("div",{className:"skeleton-shimmer",style:{width:"100%",height:"16px",marginBottom:"8px"}}),s.jsx("div",{className:"skeleton-shimmer",style:{width:"80%",height:"16px",marginBottom:"24px"}}),s.jsx("div",{className:"skeleton-shimmer",style:{width:"100%",height:"48px"}})]},i))}),!p&&!x&&d.length===0&&s.jsxs("div",{className:"listings-empty-state",children:[s.jsx("div",{className:"listings-empty-icon",children:"ðŸ¢"}),s.jsx("h3",{className:"listings-empty-title",children:"No Suppliers Found"}),s.jsx("p",{className:"listings-empty-text",children:r||t||n?"Try adjusting your search or filters to find more suppliers.":"Our supplier network is being updated. Check back soon!"})]}),!p&&!x&&d.length>0&&s.jsx("div",{className:`suppliers-grid ${u==="list"?"list-view":""}`,children:d.map(e=>s.jsxs("article",{className:"supplier-listing-card",children:[s.jsxs("div",{className:"supplier-card-header",children:[s.jsx("div",{className:"supplier-card-logo",children:(e.companyName||"S").charAt(0).toUpperCase()}),s.jsxs("div",{className:"supplier-card-meta",children:[s.jsxs("div",{className:"supplier-card-badges",children:[e.isVerified&&s.jsxs("span",{className:"supplier-badge verified",children:[s.jsx(q,{size:12})," Verified"]}),e.isFeatured&&s.jsxs("span",{className:"supplier-badge featured",children:[s.jsx(W,{size:12})," Featured"]}),s.jsx("span",{className:"supplier-badge type",children:V(e.supplierType)})]}),e.websiteUrl?s.jsx("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"supplier-card-name",children:e.companyName}):s.jsx("h3",{className:"supplier-card-name",children:e.companyName})]})]}),s.jsxs("div",{className:"supplier-card-body",children:[s.jsx("p",{className:"supplier-card-description",children:e.description||e.businessDescription||"This supplier provides quality products and services for B2B customers. Contact them to learn more about their offerings."}),s.jsxs("div",{className:"supplier-card-info",children:[e.location&&s.jsxs("div",{className:"supplier-card-info-item",children:[s.jsx(H,{size:14}),s.jsx("span",{children:e.location})]}),e.websiteUrl&&s.jsxs("div",{className:"supplier-card-info-item",children:[s.jsx(R,{size:14}),s.jsx("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",children:e.websiteUrl.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),e.email&&s.jsxs("div",{className:"supplier-card-info-item",children:[s.jsx(Z,{size:14}),s.jsx("a",{href:`mailto:${e.email}`,children:e.email})]})]}),e.industries&&e.industries.length>0&&s.jsxs("div",{className:"supplier-card-industries",children:[e.industries.slice(0,3).map((i,g)=>s.jsx("span",{className:"supplier-industry-tag",children:typeof i=="string"?i:i.name},g)),e.industries.length>3&&s.jsxs("span",{className:"supplier-industry-tag",children:["+",e.industries.length-3," more"]})]})]}),s.jsxs("div",{className:"supplier-card-footer",children:[e.websiteUrl?s.jsxs("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"supplier-card-btn outline",children:[s.jsx(J,{size:16})," Visit Website"]}):s.jsxs("button",{className:"supplier-card-btn outline",disabled:!0,children:[s.jsx(R,{size:16})," No Website"]}),s.jsxs(k,{to:"/rfq",className:"supplier-card-btn primary",children:[s.jsx(K,{size:16})," Send Enquiry"]})]})]},e.id))}),!p&&d.length>0&&o.totalPages>1&&s.jsxs("nav",{className:"listings-pagination",children:[s.jsx("button",{className:"listings-page-btn",disabled:a===1,onClick:()=>m(e=>Math.max(1,e-1)),children:s.jsx(Q,{size:18})}),$().map((e,i)=>e==="..."?s.jsx("span",{className:"listings-page-ellipsis",children:"..."},`ellipsis-${i}`):s.jsx("button",{className:`listings-page-btn ${a===e?"active":""}`,onClick:()=>m(e),children:e},e)),s.jsx("button",{className:"listings-page-btn",disabled:a===o.totalPages,onClick:()=>m(e=>Math.min(o.totalPages,e+1)),children:s.jsx(X,{size:18})})]})]})]})]})};export{os as default};
